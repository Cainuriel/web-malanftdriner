{"version":3,"sources":["helpers/getToken.js","FetchCard.js","App.js","index.js"],"names":["getToken","url","a","fetch","response","json","token","FetchCard","props","useState","name","description","rarity","filetype","img","video","object","setObject","nftContract","idToken","provider","ethers","providers","Web3Provider","window","ethereum","signer","getSigner","contract","Contract","NFT","abi","tokenURI","tokenUri","console","log","updateToken","mensajeError","message","Swal","fire","title","text","icon","confirmButtonText","then","newToken","properties","image","useEffect","fetchToken","className","parseInt","_hex","style","maxWidth","src","width","autoPlay","loop","muted","type","App","balance","setBalance","network","setNetwork","BNBPRICE","offSetY","setOffSetY","handleScroll","scrollY","networkData","chainId","chainName","rpcUrls","nativeCurrency","symbol","decimals","blockExplorerUrls","request","method","params","getNetwork","init","accounts","accountConnection","subint","substr","subfinal","document","querySelector","innerHTML","checkingNFTs","classList","remove","account","tokensOfOwner","contractUserBalance","length","on","saleMintToken","value","transaction","b","c","d","amountBNB","utils","formatEther","showConfirmButton","imageUrl","imageWidth","imageHeight","imageAlt","wait","Ok","hash","html","result","isConfirmed","isDenied","data","addEventListener","removeEventListener","checkingNetwork","changeAccounts","showCancelButton","open","addNetwork","transform","id","onClick","buytokens","map","ReactDOM","render","getElementById"],"mappings":"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","file":"static/js/main.09c7aec7.chunk.js","sourcesContent":["const getToken = async (url) => {\r\n\r\n   //const userId = Math.floor(Math.random() * 4 ) + 1;\r\n\r\nconst response = await fetch(url);\r\nconst token = await response.json();\r\nreturn token;\r\n\r\n}\r\n\r\nexport default getToken;","import React from \"react\";\r\nimport { useState, useEffect, useCallback } from \"react\";\r\nimport Swal from 'sweetalert2';\r\nimport { ethers } from 'ethers';\r\nimport NFT from './artifacts/contracts/BNBCollection.sol/BNBCollection.json';\r\nimport getToken from './helpers/getToken';\r\n\r\nconst FetchCard = (props) => { // @props: La id del NFT\r\n\r\n    const [object, setObject] = useState({\r\n        name: 'name',\r\n        description: 'description',\r\n        rarity: 'rarity',\r\n        filetype: 'filetype',\r\n        img: 'image',\r\n        video: 'video',\r\n      });\r\n      const nftContract = \"0xEC2b1F41E90590cfc44c090DFdeed9DCb55eE000\"; // proyecto bnbmarketplace\r\n      // funcion para capturar la URI de un NFT\r\n      async function fetchToken(idToken)  {\r\n\r\n        const provider = new ethers.providers.Web3Provider(window.ethereum);\r\n        const signer = provider.getSigner();\r\n        const contract = new ethers.Contract(nftContract, NFT.abi, signer);\r\n\r\n        //console.log('idtoken ', idToken._hex);\r\n\r\n          try {\r\n\r\n            const tokenUri = await contract.tokenURI(idToken);\r\n            console.log('que pasa con el tokenuri', tokenUri);\r\n             updateToken(`https://ipfs.infura.io/ipfs/${tokenUri}?clear`);\r\n\r\n          } catch (err) {\r\n            let mensajeError = err.message;\r\n            Swal.fire({\r\n              title: 'Fallo acceso a metadata',\r\n              text: `${mensajeError}`,\r\n              icon: 'error',\r\n              confirmButtonText: 'Cerrar'\r\n            })\r\n            console.log(\"Error: \", err)\r\n          }\r\n          \r\n   \r\n  }\r\n      // funcion que crea el objeto del token\r\n    const updateToken = async (url) => {\r\n       await getToken(url) // funcion que hace el fetch\r\n            .then(\r\n                (newToken) => {\r\n                  console.log('este es el metadata del token', newToken);\r\n                    setObject(\r\n                        {\r\n                          name: newToken.properties.name.description,\r\n                          description: newToken.properties.description.description,\r\n                          rarity: newToken.properties.rarity.description,\r\n                          filetype: newToken.properties.filetype.description,\r\n                          img: newToken.properties.image.description,\r\n                          video: newToken.properties.video.description,\r\n                        });\r\n                ;}\r\n            )\r\n    }\r\n\r\n\r\n    useEffect(() => {\r\n      console.log('props ', props.idToken);\r\n        fetchToken(props.idToken);\r\n    }, []);\r\n\r\n    return (\r\n\r\n        <div key={object.name} className=\"col-lg-6 text-center text-lg-start py-2\">\r\n                  <small>{parseInt(props.idToken._hex, 16)}</small>\r\n            <div className=\"card mb-3\" style={{maxWidth: \"750px\"}}>\r\n                <div className=\"row g-0\">\r\n                    <div className=\"col-md-8\">\r\n                    {object.filetype === \"Imagen\" ?\r\n                    <img src={`https://ipfs.infura.io/ipfs/${object.img}`} className=\"img-fluid rounded-start\"/>\r\n                    : \r\n                    <video width=\"400\" autoPlay loop muted>\r\n                      <source src={`https://ipfs.infura.io/ipfs/${object.video}`} type=\"video/mp4\"/>\r\n                    </video>\r\n                    }\r\n                    </div>\r\n                    <div className=\"col-md-4\">\r\n                        <div className=\"card-body\">\r\n                        <h5 className=\"card-title\">{object.name}</h5>\r\n                        <p className=\"card-text\">{object.description}</p>\r\n                        <p className=\"card-text\"><strong>Rareza: </strong><small className=\"text-muted\">{object.rarity}</small></p>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default FetchCard","import React from \"react\";\r\nimport { useEffect, useState} from 'react';\r\nimport './App.css';\r\nimport Swal from 'sweetalert2';\r\nimport VideoPlayer from \"react-background-video-player\";\r\nimport { ethers } from 'ethers';\r\nimport NFT from './artifacts/contracts/BNBCollection.sol/BNBCollection.json';\r\n//import Presale from './artifacts/contracts/Presale.sol/Presale.json';\r\nimport FetchCard from './FetchCard';\r\n\r\n\r\n\r\nfunction App() {\r\n \r\n  const BINANCETESTNET = 'bnbt';\r\n  const nftContract = \"0xEC2b1F41E90590cfc44c090DFdeed9DCb55eE000\"; // bnbmarketplace\r\n  const [balance, setBalance] = useState([]);\r\n  const [network, setNetwork] = useState('no-net');\r\n  const BNBPRICE ='300000000000000000';\r\n\r\n // parallax effect\r\n  const [offSetY, setOffSetY] = useState(0);\r\n  const handleScroll = () => setOffSetY(window.scrollY);\r\n  useEffect(() => {\r\n    window.addEventListener('scroll', handleScroll);\r\n    return () => {\r\n      window.removeEventListener('scroll', handleScroll);\r\n    }\r\n  }, [])\r\n\r\n  // se comprueba si se dispone de metamask, las funcion de chequeo de la red y cambio de cuenta\r\n  useEffect(function () {\r\n\r\n    if (typeof window.ethereum !== 'undefined') {\r\n    \r\n    checkingNetwork();\r\n    changeAccounts();\r\n  \r\n \r\n    } else {\r\n            Swal.fire({\r\n              title: \"No tiene metamask instalado\",\r\n              text: \"Cambie de navegador o puede instalárselo apretando al botón\",\r\n              showCancelButton: true,\r\n              confirmButtonText: \"Instalar\",\r\n              imageUrl: './img/metamask-transparent.png',\r\n              imageAlt: \"Instalar metamask\",\r\n            }).then((result) => {\r\n              /* Read more about isConfirmed, isDenied below */\r\n              if (result.isConfirmed) {\r\n                window.open('https://chrome.google.com/webstore/detail/metamask/nkbihfbeogaeaoehlefnkodbefgpgknn', '_blank');  \r\n              }})};\r\n        \r\n      },[]);\r\n\r\n  // solo si hay cambios de red se activa este useEffect\r\n  useEffect(function () {\r\n\r\n      // comprueba si se dispone la red adecuada.\r\n      if(network !== BINANCETESTNET && network !== 'no-net' ){ \r\n\r\n          Swal.fire({\r\n            title: '¡Atencion!',\r\n            text: \"Estas en la red \"+network,\r\n            showCancelButton: true,\r\n            confirmButtonText: \"Instalar o cambiar a la red Testnet BSC\",\r\n            imageUrl: 'https://cryptodaily.io/wp-content/uploads/2021/07/p-2.png',\r\n            imageWidth: 300,\r\n            \r\n            imageAlt: 'Red Binance Smart Chain',\r\n          }).then((result) => {\r\n            /* Read more about isConfirmed, isDenied below */\r\n            if (result.isConfirmed) {\r\n              addNetwork();\r\n            }\r\n          })\r\n        } else {\r\n\r\n        console.log('ok network ', network );\r\n      }\r\n        \r\n        console.log('Control de network ', network );\r\n\r\n},[network]);\r\n\r\n  // funcion que cambia o instala la red de pruebas de BSC\r\n  async function addNetwork() {\r\n\r\n    let networkData = [{\r\n            chainId: \"0x61\",\r\n            chainName: \"BSCTESTNET\",\r\n            rpcUrls: [\"https://data-seed-prebsc-2-s3.binance.org:8545\"],\r\n            nativeCurrency: {\r\n              name: \"BINANCE COIN\",\r\n              symbol: \"BNB\",\r\n              decimals: 18,\r\n            },\r\n            blockExplorerUrls: [\"https://testnet.bscscan.com/\"],\r\n          },\r\n        ];\r\n\r\n      // agregar red o cambiar red\r\n      return window.ethereum.request({\r\n        method: \"wallet_addEthereumChain\",\r\n        params: networkData,\r\n      });\r\n  }\r\n\r\n    // captura de la blockchain de la metamask\r\n  async function checkingNetwork() {\r\n    const provider = new ethers.providers.Web3Provider(window.ethereum);\r\n    // capturamos la red\r\n    const network = await provider.getNetwork();\r\n    console.log('network', network.name);\r\n    setNetwork(network.name);\r\n  }\r\n\r\n  // funcion de conexion a la red.\r\n  async function init() {  \r\n            // captura la cuenta del usuario\r\n            const accounts = await window.ethereum.request({ method: 'eth_requestAccounts' });\r\n            let accountConnection = accounts[0];\r\n            console.log('esta conectado',accountConnection);\r\n            let subint = accountConnection.substr(0,4);\r\n            let subfinal = accountConnection.substr(-4,4);\r\n            document.querySelector('#intro').innerHTML ='Conectado con la cuenta: ' + subint + '...' + subfinal;\r\n            await checkingNFTs(accountConnection);\r\n            let element = document.querySelector(\"#formBuy\");\r\n            element.classList.remove(\"d-none\");\r\n                \r\n  }\r\n\r\n\r\n     // comprobacion de NFTs\r\n  async function checkingNFTs(account) { \r\n\r\n     const provider = await new ethers.providers.Web3Provider(window.ethereum);\r\n     const signer = provider.getSigner();\r\n     const contract = await new ethers.Contract(nftContract, NFT.abi, signer);\r\n\r\n     try {\r\n       const contractUserBalance = await contract.tokensOfOwner(account);\r\n        console.log('contract user balance', contractUserBalance);\r\n          // comprobamos si el usuario tiene avatares.\r\n          if(contractUserBalance.length > 0) {\r\n            document.querySelector('#tokens').innerHTML ='Precio: 0.3 BNB';\r\n            let newArray = contractUserBalance;\r\n            setBalance(newArray);\r\n            \r\n              }    else {\r\n                document.querySelector('#tokens').innerHTML ='Precio: 0.3 BNB';\r\n\r\n              }\r\n\r\n        } catch (err) {\r\n          let mensajeError = err.message;\r\n          if (err.message === 'call revert exception (method=\"tokensOfOwner(address)\", errorArgs=null, errorName=null, errorSignature=null, reason=null, code=CALL_EXCEPTION, version=abi/5.5.0)') {\r\n            mensajeError =  'No ha cambiado a la red adecuada. Cambie de red y vuelva a recargar la página.';\r\n          } \r\n          \r\n          Swal.fire({\r\n            title: 'Ooops!',\r\n            text: `${mensajeError}`,\r\n            icon: 'error',\r\n            confirmButtonText: 'Cerrar'\r\n          })\r\n          console.log(\"Error: \", err)\r\n        }\r\n\r\n  }\r\n\r\n\r\n    // funcion que detecta los cambios de cuenta\r\n    async function changeAccounts() {\r\n          \r\n      if (typeof window.ethereum !== 'undefined') {\r\n\r\n        window.ethereum.on(\"accountsChanged\", async function () {\r\n\r\n          await init();\r\n          \r\n        });\r\n\r\n      }\r\n    }\r\n    // funcion que abre el faucet para pedir BNBs de prueba\r\n    function faucet() {\r\n      window.open('https://testnet.binance.org/faucet-smart', '_blank');  \r\n    }\r\n\r\n    async function buytokens() {\r\n        \r\n          const [account] = await window.ethereum.request({ method: 'eth_requestAccounts' });\r\n          const provider = new ethers.providers.Web3Provider(window.ethereum);\r\n          const signer = provider.getSigner();\r\n          const contract = new ethers.Contract(nftContract, NFT.abi, signer);\r\n          \r\n          try {\r\n            const transaction = await contract.saleMintToken(account, {value: BNBPRICE});\r\n            // event capture\r\n            contract.on(\"TokenPurchase\", (a, b, c, d) => {\r\n              let amountBNB = ethers.utils.formatEther(c);\r\n              console.log(`Comprador: ${b} precio: ${amountBNB} idtoken: ${d}`);\r\n              });\r\n\r\n            Swal.fire({\r\n              title: 'Procesando el pago',\r\n              text: 'Espere. No actualice la página',\r\n              showConfirmButton: false,\r\n              imageUrl: 'https://thumbs.gfycat.com/ConventionalOblongFairybluebird-size_restricted.gif',\r\n              imageWidth: 100,\r\n              imageHeight: 100,\r\n              imageAlt: 'Procesando el pago',\r\n  \r\n            });\r\n            \r\n            const Ok = await transaction.wait();\r\n            console.log(`hash: ${transaction.hash}`);\r\n\r\n                  if(Ok) {\r\n                    Swal.fire({\r\n                    title:  `Se ha envíado un NFT a la cuenta ${account}`,\r\n                    html: `<a href=\"https://testnet.bscscan.com/tx/${transaction.hash}\" target=\"_blank\" rel=\"noreferrer\">Hash de la transacción</a>`,\r\n                    icon: 'success',\r\n                    confirmButtonText: 'Cerrar'\r\n                  }).then((result) => {\r\n                    /* Read more about isConfirmed, isDenied below */\r\n                    if (result.isConfirmed) {\r\n                      init();\r\n                    } else if (result.isDenied) {\r\n                      init();\r\n                    }\r\n                  })\r\n          \r\n              };\r\n        \r\n      \r\n          }catch (err) {\r\n            let mensajeError = err.message;\r\n             \r\n            if (err.data) {\r\n  \r\n              if (err.data.message === 'execution reverted: Sale must be active to buy Tokens') {\r\n                mensajeError =  'La venta no está habilitada';\r\n              }  else if(err.data.message === 'execution reverted: value sent needs to be atleast sale price'){\r\n                mensajeError =  'Debe de pagar como mínimo el precio estipulado';\r\n              } else  if(err.data.message === 'execution reverted: There are no tokens to buy'){\r\n                mensajeError =  'Lo sentimos. Ya no hay mas NFTs a la venta. Informese en el canal de Telegram';\r\n              } else {\r\n                console.log('error: ',mensajeError);\r\n              }\r\n            }\r\n  \r\n            Swal.fire({\r\n              title: 'Ooops!',\r\n              text: `${mensajeError}`,\r\n              icon: 'error',\r\n              confirmButtonText: 'Cerrar'\r\n            })\r\n            console.log(\"Error: \", err)\r\n          }\r\n       \r\n    }\r\n\r\n  return (\r\n\r\n<div className=\"frame container\">\r\n        <div className=\"main row align-items-center g-lg-5 py-5\" style={{transform: `translateY(-${offSetY * 0.3}px)`}}>\r\n          <div className=\"col-lg-4 text-center text-lg-start\">\r\n            <form className=\"p-4 p-md-5 border rounded-3 bg-light\">\r\n            <div className=\"form-floating mb-3\">\r\n            <h2 id=\"intro\" className=\"text-muted\">No conectado</h2>\r\n            </div>\r\n            <hr className=\"my-4\"/>\r\n            <h3 id=\"tokens\" className=\"text-muted\"></h3>\r\n            </form>\r\n          </div>\r\n          <div className=\"col-lg-4 text-center text-lg-start\">\r\n            <button id=\"btn-firma\"  onClick={() => init()} className=\"w-100 btn btn-lg btn-danger mb-4\" type=\"button\">Conectar Metamask</button>\r\n            <button id=\"faucet\"  onClick={() => faucet()} className=\"w-100 btn btn-lg btn-primary\" type=\"button\">Faucet de Binance</button>\r\n            <button id=\"formBuy\" onClick={() => buytokens()} className=\"w-100 btn btn-lg btn-success my-4 d-none\" type=\"button\">Comprar NFTs</button>\r\n          </div>\r\n        </div>\r\n        <div className=\"row align-items-center g-lg-5\"> \r\n            {\r\n          balance && // si hay balance se imprimiran los NFTs.\r\n              balance.map((idToken) => {\r\n                \r\n                return  <FetchCard idToken={idToken} />\r\n              }) \r\n \r\n            }\r\n        </div> \r\n\r\n    <VideoPlayer style={{transform: `translateY(${offSetY * 1}px)`}}\r\n        className=\"Video\"\r\n        src={\r\n          \"./video.mp4\"\r\n        }\r\n        autoPlay={true}\r\n        muted={true}\r\n        loop={true}\r\n      />\r\n</div>\r\n\r\n  );\r\n}\r\n\r\nexport default App;\r\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\n\nReactDOM.render(\n\n    <App />,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}